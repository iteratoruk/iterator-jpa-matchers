language: java
jdk:
  - openjdk11
cache:
  directories:
  - "$HOME/.m2/repository"
branches:
  only:
  - master
  - "/^iterator-jpa-matchers-[0-9]+\\.[0-9]+\\.[0-9]+/"
after_success:
- mvn clean test jacoco:report coveralls:report
- test "${TRAVIS_PULL_REQUEST}" == "false" && test "${TRAVIS_TAG}" != "" && mvn deploy --settings settings.xml
env:
  global:
  - secure: vVdE9Z7MT8MXGSXqZj5GSvDW8cUqHQHgrK2DK6VLXHOLkEcpetzatbG2m9vCrOOeJLENDY97RN/y9UoqqdvxPaUUzLb6fuK2tiZDVRGMf0q5FbM70qiDstLnVW6rOYYACS9V7Ta+ghgoEJkRbdzSgCtlRbEU5WGAA6s5H3M+SLoAxKwL0juTxRhGdubftvEWr8uG1EQxKPEpUc+AkzQS9mNd+XnijEStaBYItRbuYI0z5I6Wzp6ttQv/VdRGPjaxMPMPYnolawJSw2N0p+Pd/0G65Cu6gxib9CfLjqw9/dIfwuTlsaNUN7nXtFf8Y4pOD4l4YB3XPdo0hjb653I4Ppu46m6ytfEiVNaXgURbYqjhNTABJhdQ54+8fq8HJGsWltRB5sO0HZA0OsPTFwKj9Xtif6vlCL5lMmoiTSRbfmvkjbPoKe3HcKRjAJbetAz29/VMHZHp0Dr++KC9KtdUqeGZBYcWY5dJ06eYe1Aj+0iLCgVDcVMRTmSigHTgXvhgDQVQcHIlgzu70zScelhp4/eOl0Ttdep55r52atEMayqbRwqscvVg7oOwfVV3glnGQet9k0QN4eR5DbxKrPJYn/1N9LlNpxJUr0iEM0CEx4QwHccKZ5y0XZ/GWdN6DGT3meY4kwvWEQ1aT0KV3NyJQFspLXQFlSwPjRLEoz4Np8I=
  - secure: GMCyDZ/m1wSIuJU0p9hBmQYQyxf4yAgEZtiyLGU9ctWX2PNEwRL7b3cVQjg9psQIayMJv4GSV38fd5toDYVCAZz8u47/hqn37l1EUQhtch37tPNwFuoTLCIH9Buks/5NBQ6i3fpGiaAGEkkhAtQ7UlTZ/8bH/Vbx4s8XmbI9gLcPJ30DFtE08j814KJL/MdxezA3z/w6rb/ghSCcf4sq05P9wxa4VJ44noaee99iwbzeDjf+D1UIoTT1gMjPhuG+Op06R0XexTkA2tcHt2Vr/MFOOoKVVRgA6QmQbKLtflGUDY0Y4plrzuh+mijrltuf/05alj4x2UO0Oe3nSiiiA1B6s3BIUwktkiwuqD4NM96F6TKuWKroevkNSP3/8RkAlSnIR9zuAdBHXstJX0GPvxQgYyRa4YkFDBU/0fkqnBV+IjbXmIcnmSeTM02twH1C9KCFR+Vf5DY1Xz6bahuAlNdJbskW7C/xqxV4/oy3g0eRUxlgrB+lOCbQyhPlLQ28KxsAoRHgaaiYwu1uOYKUkx7mnpSg1KMF8e8H7hfbTHjzZCBZ5DIv1C5nOXWzulU4HRg98uC9M+TdDGmg5rU5iUH0hlgtOLlE3QPZDX5TQehhLbDU5w/24YE98K5hnUqhJu4EkCNlMnQsRwggbChPOc6FEyuJRkX1RAtkVzfkIiI=
  - secure: vCJEdbrKyonqSkYkzG1NWRmO6phqM8CUaa4yHxVXXRiZ0UM/n4vN2gfLx1GK8HXGPjHxiI1CtMKxCNvh2RXsGgZyQGuNEJ2mX1xtEvBGoZ3RwRlP2t4OkScD4zqhdEeTmqRhlwjOZfK9vpsARNFr/vQx9rXCMbL3UsaJ5Utwjwb80L8EonKqxVYKzmrSxvNz1vkkdSY4YLRr7ZVt075rNvZi4Be/pRcdEh/iqyrOHFJDavplDexZRFBO/I63DDTYhh27xqm6VgR4zR+evq1eSe9y6ByNzSdVcOf3covsS5lS6lEmJaAJND/QGpEqloewya/LCECfrYI1MCqSr+aZIxuW/kzHYCeqVTnePi0x0yry958lYr3KOiGmRh9aAAi7xBNNKkuqOegS5ZOlEi4lORwrRqvsIR/GziL071InQgwV7Q96w9TCXI0xuIAz4CsWfdDVcTmb+1VKCBoOZTf+e1A0Iv4mEUExk4raIxPZvIYFQ1kcMApBw8YextBHHjA+HCsl/Ojr5KqnBMQST/iV/fF+MRreUCPn3Gf7W5G+1ZE2tKhfwxVGQx8P8+gEHpx9+Ou7iMwxv5n8+9A9m2kFiDH+f5zzEKm/NehrJ7HI0Hwpp7XajMvJLETOadafqxybnRjmaO8av03DxGCMWOpnr9bjln0ezk7Q/zVszFd1cW0=
addons:
  sonarcloud:
    organization: "iteratoruk"
    token:
      secure: "Pv7GmHXk6s8EFaUAegXDjgjpu3zm/ezQb5pRK+A5S1yARxQ8kvpsBhLyJHKFN9iPn9pn0uDGQj0C0V6zH7fnCCGD1HAhHM2ytAot7Q4aHCjHTycvygNnfNroAHtdBv8qq9B66aBNifHrMlorjtI06nRrggyH+4X0wiYnlYhWulvkjFZPSJv8VUQ8mvH+aqQZFYPntWjwhsKY1h1b+Cbs1iSTAUJnvsM1c6/57JbsrrPKwCJchCH+XsvDfmtr7UIYlw5e+xHsLRGHpAfs1skLqkKbGeaqDHpfcap8SO1UIctYPg4mU1zINt2OH7P16bH3uKi/EiEDiwzuHokIlPtrcW5X0Ubb/rBEn5Jwoe89Vgr8VWMxaH637dcMGDbU+7jWnxwYwfM7eZsOZ3feYblU43MO0hADWXBVBsHmp3W1SnqiK980L2nuXw40CH6eADeXW6OdKqy1qP5j0sH/xPzWhtP/sG8DdmsDHjq3BI0+nSJp0ynfVosZvGoNPTbaovwru46we+R7YxqjAptSr55wg6tMqIlyhdawefwfiVxoir1uwVF4llCdjQ/KdO6IlFnsVt6ZGksj0896faUd+LsAPP3V/ySNxUQs4TOo5UJEDeIU0RPXZKmr9nW9ottlyf8iuUvwftmsYjO4pFGQGWwSEqixcLniPlFGG63aLY9wkaw="
script:
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar -Dsonar.projectKey=iteratoruk_iterator-jpa-matchers